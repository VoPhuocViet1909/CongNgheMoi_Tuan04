<div class="panel">
  <div class="panel__head">
    <h2>✏️ Chỉnh sửa sản phẩm</h2>
    <a href="/" class="btn ghost">← Quay lại</a>
  </div>

  <form action="/products/<%= product.id %>?_method=PUT" method="POST" enctype="multipart/form-data" class="form">
    <div class="field">
      <label for="name">Tên sản phẩm <span style="color: var(--accent-2);">*</span></label>
      <input 
        type="text" 
        id="name" 
        name="name" 
        required
        value="<%= product.name %>"
      >
    </div>

    <div class="field">
      <label for="categoryId">Danh mục</label>
      <select id="categoryId" name="categoryId">
        <option value="">-- Chọn danh mục --</option>
        <% categories.forEach(cat => { %>
          <option 
            value="<%= cat.categoryId %>"
            <%= product.categoryId === cat.categoryId ? 'selected' : '' %>
          >
            <%= cat.name %>
          </option>
        <% }) %>
      </select>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
      <div class="field">
        <label for="price">Giá (VNĐ) <span style="color: var(--accent-2);">*</span></label>
        <input 
          type="number" 
          id="price" 
          name="price" 
          required
          min="0"
          step="1000"
          value="<%= product.price %>"
        >
      </div>

      <div class="field">
        <label for="quantity">Số lượng <span style="color: var(--accent-2);">*</span></label>
        <input 
          type="number" 
          id="quantity" 
          name="quantity" 
          required
          min="0"
          value="<%= product.quantity %>"
        >
      </div>
    </div>

    <div class="field">
      <label>Hình ảnh hiện tại</label>
      <div class="current-image">
        <% if (product.url_image) { %>
          <img src="<%= product.url_image %>" alt="<%= product.name %>">
        <% } else { %>
          <p class="muted">Chưa có hình ảnh</p>
        <% } %>
      </div>
    </div>

    <div class="field">
      <label for="image">Thay đổi hình ảnh</label>
      <input 
        type="file" 
        id="image" 
        name="image" 
        accept="image/*"
      >
      <small class="muted">Để trống nếu không muốn thay đổi hình ảnh</small>
    </div>

    <div class="actions">
      <button type="submit" class="btn solid">
        ✅ Cập nhật sản phẩm
      </button>
      <a href="/" class="link">Hủy</a>
    </div>
  </form>
</div>
